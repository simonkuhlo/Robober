{% extends "base.j2" %}

{% block main %}
    <link rel="stylesheet" href="/visual/static/plugins/plugin_details.css" />
    <div class="box-h flex-center-v">
<div class="center-v">
        {% set start_button_message = "Start / Stop" %}
        {% if plugin.status == Status.STARTED %}
            ğŸŸ¢
            {% set start_button_message = "â¹ Stop" %}
        {% elif plugin.status == Status.STOPPED  %}
            ğŸ”´
            {% set start_button_message = "â–¶ Start" %}
        {% elif plugin.status == Status.ERROR  %}
            âš ï¸
            {% set start_button_message = "Restart" %}
        {% else %}
            âšª
            {% set start_button_message = "â–¶ Start" %}
        {% endif %}
    </div>
    <h2>{{ plugin.name }}</h2>
    <div class="spacer-flex-h"></div>
    <button>{{ start_button_message }}</button>
    <button><b> ... </b></button>
    </div>
    <p>{{ plugin.description }}</p>
    <div class="box-h navbar">
        <div class="spacer-flex-h"></div>
        <a class="button" href="/visual/plugins/{{ plugin.plugin_id }}/plugin_view">View</a>
        <a class="button" href="/visual/plugins/{{ plugin.plugin_id }}/integrations">Integrations</a>
        <a class="button" href="/visual/plugins/{{ plugin.plugin_id }}/settings">Settings</a>
        <a class="button" href="/visual/plugins/{{ plugin.plugin_id }}/logs">Logs</a>
    </div>
    <div id="plugin-details-main">

        <p><i>Plugin has no view.</i></p>
    </div>
    <script>
        fetch("/visual/plugins/{{ plugin.plugin_id }}/plugin_view")
        .then( response => response.text())
        .then( data => { document.getElementById("plugin-details-main").innerHTML = data });
   </script>
{% endblock %}